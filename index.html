<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suivi Logements iPhone</title>
<style>
body {
  margin:0; padding:0; font-family:sans-serif;
  background:#111; color:#fff;
}
.app {
  max-width:500px; margin:auto; padding:20px;
}
h1 { text-align:center; font-size:1.8em; margin-bottom:20px; }
.counter { text-align:center; font-size:1.5em; margin:15px 0; font-weight:bold; }
.input-group { margin:15px 0; display:flex; flex-direction:column; }
.input-group label { margin-bottom:5px; font-weight:bold; }
.button {
  background:#007AFF; color:white; border:none;
  padding:14px; border-radius:12px; font-size:1.2em; font-weight:600;
  margin-top:10px; cursor:pointer;
}
.button:hover { background:#005BBB; }
.logement {
  background:#222; padding:10px; margin-top:8px; border-radius:8px; border:1px solid #444;
}
.btn-reset { background:#AA0000; margin-top:20px; }

.roulette-container {
  position: relative; width:100%; height:100px; margin:15px 0;
}
.roulette {
  width:100%; height:60px; border-radius:12px; background:#222;
  display:flex; align-items:center; justify-content:center;
  font-size:1.5em; font-weight:bold;
  user-select:none;
  touch-action: none;
}
</style>
</head>
<body>
<div class="app">
<h1>ü™≥ Suivi logements</h1>

<div id="main">
  <div class="counter" id="compteur">0 / 0</div>

  <div class="input-group">
    <label>Nombre total de logements :</label>
    <div class="roulette-container">
      <div class="roulette" id="totalRoulette">20</div>
    </div>
  </div>

  <div class="input-group">
    <label>Num√©ro du logement :</label>
    <div class="roulette-container">
      <div class="roulette" id="numRoulette">0</div>
    </div>
  </div>

  <div class="input-group">
    <label>√âtage :</label>
    <select id="etageSelect">
      <option value="-2">-2</option>
      <option value="-1">-1</option>
      <option value="0" selected>RDC</option>
      <option value="1">1er</option>
      <option value="2">2e</option>
      <option value="3">3e</option>
      <option value="4">4e</option>
      <option value="5">5e</option>
      <option value="6">6e</option>
      <option value="7">7e</option>
      <option value="8">8e</option>
      <option value="9">9e</option>
      <option value="10">10e</option>
    </select>
  </div>

  <button class="button" onclick="ajouterLogement()">Ajouter logement</button>

  <div id="liste"></div>
  <button class="btn-reset button" onclick="resetApp()">üóëÔ∏è Remettre √† z√©ro</button>
</div>
</div>

<script>
let total = 20;
let num = 0;
let logements = [];

if(localStorage.getItem("total")) {
  total = parseInt(localStorage.getItem("total"));
  logements = JSON.parse(localStorage.getItem("logements")||"[]");
  document.getElementById("totalRoulette").textContent = total;
  majListe();
}

function majCompteur() {
  document.getElementById("compteur").textContent = logements.length+" / "+total;
}

function majListe() {
  const div = document.getElementById("liste");
  div.innerHTML = "";
  logements.forEach(l => {
    const el = document.createElement("div");
    el.className="logement";
    el.textContent="Logement "+l.numero+" ‚Äî "+l.etage;
    div.appendChild(el);
  });
  majCompteur();
}

function ajouterLogement() {
  num = parseInt(document.getElementById("numRoulette").textContent);
  let etage = document.getElementById("etageSelect").value;
  if(logements.some(l=>l.numero===num)) return alert("Logement d√©j√† enregistr√© !");
  logements.push({numero:num, etage});
  localStorage.setItem("logements", JSON.stringify(logements));
  localStorage.setItem("total", total);
  majListe();
}

// Remise √† z√©ro
function resetApp() {
  if(!confirm("Remettre √† z√©ro ?")) return;
  logements=[];
  localStorage.removeItem("logements");
  majListe();
}

// Roulettes tactiles
function setupRoulette(el, min, max, initial) {
  let value = initial;
  let startY = null;

  function updateDisplay() { el.textContent = value; }

  el.addEventListener("touchstart", e => {
    startY = e.touches[0].clientY;
  });

  el.addEventListener("touchmove", e => {
    if(startY===null) return;
    let delta = startY - e.touches[0].clientY;
    if(Math.abs(delta) >= 5){
      value += Math.sign(delta);
      if(value<min) value=min;
      if(value>max) value=max;
      updateDisplay();
      startY = e.touches[0].clientY;
    }
  });

  el.addEventListener("touchend", e => { startY=null; });

  updateDisplay();
}

setupRoulette(document.getElementById("totalRoulette"), 1, 5000, total);
setupRoulette(document.getElementById("numRoulette"), 0, 5000, num);

majCompteur();
</script>
</body>
</html>
