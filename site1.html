<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suivi Logements Trait√©s</title>
<style>
body { font-family:'Segoe UI', Arial, sans-serif; margin:0; padding:20px; background:#f6f7fb; color:#222; }
.app { max-width:500px; margin:auto; background:#fff; border-radius:16px; padding:30px; box-shadow:0 4px 20px rgba(0,0,0,0.1); }
h1 { text-align:center; margin-bottom:20px; font-size:1.8em; }
.counter { text-align:center; font-size:1.4em; margin:15px 0; font-weight:bold; }
.input-group { margin:15px 0; display:flex; flex-direction:column; }
.input-group label { margin-bottom:5px; font-weight:bold; }
.input-group input, .input-group select { padding:10px; font-size:1em; border-radius:8px; border:1px solid #ccc; }
.button { width:100%; background:#007AFF; color:white; border:none; padding:12px; border-radius:10px; margin-top:10px; font-size:1em; font-weight:600; cursor:pointer; }
.button:hover { background:#005BBB; }
.logement { background:#eaf3ff; padding:10px; margin-top:8px; border-radius:8px; }
.btn-reset { background:#aaa; color:white; margin-top:20px; }
</style>
</head>
<body>
<div class="app">
<h1>ü™≥ Suivi de logements</h1>

<div id="setup">
  <div class="input-group">
    <label>Nombre total de logements :</label>
    <input type="number" id="totalInput" min="1" max="5000" value="20">
  </div>
  <button class="button" onclick="demarrer()">D√©marrer</button>
</div>

<div id="main" style="display:none;">
  <div class="counter" id="compteur">0 / 0</div>

  <button class="button" onclick="toggleAjout()">+ Ajouter un logement trait√©</button>

  <div id="ajout" style="display:none; margin-top:10px;">
    <div class="input-group">
      <label>Num√©ro du logement :</label>
      <input type="number" id="numInput" min="0" max="5000" value="0">
    </div>
    <div class="input-group">
      <label>√âtage :</label>
      <select id="etageSelect">
        <option value="-2">-2</option>
        <option value="-1">-1</option>
        <option value="0" selected>RDC</option>
        <option value="1">1er</option>
        <option value="2">2e</option>
        <option value="3">3e</option>
        <option value="4">4e</option>
        <option value="5">5e</option>
        <option value="6">6e</option>
        <option value="7">7e</option>
        <option value="8">8e</option>
        <option value="9">9e</option>
        <option value="10">10e</option>
      </select>
    </div>
    <button class="button" onclick="ajouterLogement()">Valider</button>
  </div>

  <div id="liste"></div>
  <button class="btn-reset button" onclick="resetApp()">üóëÔ∏è Remettre √† z√©ro</button>
</div>

<script>
let total = 0;
let logements = [];

window.onload = () => {
  const savedTotal = localStorage.getItem("total");
  const savedLogements = localStorage.getItem("logements");
  if(savedTotal) {
    total = parseInt(savedTotal);
    logements = JSON.parse(savedLogements||"[]");
    document.getElementById("setup").style.display="none";
    document.getElementById("main").style.display="block";
    majCompteur();
    majListe();
  }
}

function demarrer() {
  total = parseInt(document.getElementById("totalInput").value);
  if(total<=0) return alert("Nombre invalide !");
  localStorage.setItem("total", total);
  localStorage.setItem("logements", JSON.stringify(logements));
  document.getElementById("setup").style.display="none";
  document.getElementById("main").style.display="block";
  majCompteur();
}

function toggleAjout() {
  const div = document.getElementById("ajout");
  div.style.display = div.style.display==="none"?"block":"none";
}

function ajouterLogement() {
  const numero = document.getElementById("numInput").value.trim();
  const etage = document.getElementById("etageSelect").value;
  if(numero==="") return alert("Num√©ro invalide !");
  if(logements.some(l => l.numero===numero)) return alert("Logement d√©j√† enregistr√© !");
  logements.push({numero, etage});
  localStorage.setItem("logements", JSON.stringify(logements));
  majListe();
  majCompteur();
}

function majCompteur() {
  document.getElementById("compteur").textContent = logements.length+" / "+total;
}

function majListe() {
  const div = document.getElementById("liste");
  div.innerHTML = "";
  logements.forEach(l => {
    const el = document.createElement("div");
    el.className="logement";
    el.textContent="Logement "+l.numero+" ‚Äî "+l.etage;
    div.appendChild(el);
  });
}

function resetApp() {
  if(!confirm("Remettre √† z√©ro ?")) return;
  localStorage.removeItem("total");
  localStorage.removeItem("logements");
  location.reload();
}
</script>
</body>
</html>
